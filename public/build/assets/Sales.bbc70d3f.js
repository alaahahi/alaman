import{x as K,y as Q,r as d,a as i,g as n,j as l,w as k,k as w,F as N,o as c,H as V,b as e,e as U,v as X,z as Y,t as o,h as I,n as Z,i as F,L as ee}from"./app.147b7aea.js";import{_ as te}from"./AuthenticatedLayout.b3beb17e.js";import{s as se}from"./show.47689df2.js";import{p as oe}from"./pay.81936c57.js";import{t as ae}from"./trash.e4f9f279.js";import{e as re}from"./edit.c7100f78.js";import{_ as le}from"./ModalAddCarPayment.02bc21a5.js";import{M as de}from"./ModalDelCar.9ebd9652.js";import{_ as ne}from"./ModalEditCar_S.5956e49b.js";import{W as ie}from"./v3-infinite-loading.es.b2ee58ad.js";import{d as ce}from"./debounce.7d648f3c.js";import{a as C}from"./index.a762b12e.js";/* empty css                                                    */import"./Uploader.850b5954.js";/* empty css                                                                 *//* empty css                                                       */const pe=e("h2",{class:"mb-5 dark:text-white text-center"}," \u0647\u0644 \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u062D\u0630\u0641 \u0627\u0644\u0633\u064A\u0627\u0631\u0629 \u061F ",-1),ue={key:0,class:"py-2"},_e={class:"max-w-9xl mx-auto sm:px-6 lg:px-8"},he={class:"bg-white overflow-hidden shadow-sm"},xe={class:"p-6 dark:bg-gray-900"},ge={class:"flex flex-col"},me={class:"grid grid-cols-2 md:grid-cols-5 lg:grid-cols-5 gap-2 lg:gap-1"},be={class:"flex items-center max-w-5xl"},ye=e("label",{class:"dark:text-gray-200",for:"simple-search"},null,-1),fe={class:"relative w-full"},ve=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{"aria-hidden":"true",class:"w-5 h-5 text-gray-500 dark:text-gray-200 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1),ke={value:"0",disabled:""},we={value:""},Ce=["value"],$e=e("div",null,null,-1),Ne={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},De={class:"w-full text-sm text-right text-gray-500 dark:text-gray-200 dark:text-gray-400 text-center"},Me={class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 text-center"},Ae=e("th",{scope:"col",class:"px-1 py-3 text-base"}," No ",-1),Ie={scope:"col",class:"px-1 py-3 text-base"},Pe={scope:"col",class:"px-1 py-3 text-base"},ze={scope:"col",class:"px-1 py-3 text-base"},je={scope:"col",class:"px-1 py-3 text-base"},Be={scope:"col",class:"px-1 py-3 text-base"},Se={scope:"col",class:"px-1 py-3 text-base"},Ue=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0646\u0642\u0644 \u062E\u0627\u0631\u062C\u064A ",-1),Fe=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0646\u0642\u0644 \u062F\u0627\u062E\u0644\u064A ",-1),Re=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0633\u0639\u0631 \u0627\u0644\u0635\u0631\u0641 ",-1),qe=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u062A\u062E\u0644\u064A\u0635 ",-1),Ee=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0643\u0645\u0631\u0643 ",-1),Le=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0644\u0648\u062D\u0627\u062A ",-1),Te=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0636\u0631\u064A\u0628\u0629 ",-1),He=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0645\u0635\u0627\u0631\u064A\u0641 ",-1),Ge=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0645\u0635\u0627\u0631\u064A\u0641 \u062F\u064A\u0646\u0627\u0631 ",-1),Oe={scope:"col",class:"px-1 py-3 text-base"},We={scope:"col",class:"px-1 py-3 text-base"},Je=e("th",{scope:"col",class:"px-1 py-3 text-base"}," \u0641\u0627\u0626\u062F\u0629 \u0627\u0644\u0634\u0631\u0643\u0629 ",-1),Ke={scope:"col",class:"px-1 py-3 text-base"},Qe={scope:"col",class:"px-1 py-3 text-base"},Ve={scope:"col",class:"px-1 py-3 text-base",style:{width:"180px"}},Xe=e("th",{class:"px-1 py-3 text-base"},"\u062A\u062E\u0632\u064A\u0646",-1),Ye={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ze={className:"border dark:border-gray-800 text-center  dark:text-gray-200 text-black px-1 py-2 ",style:{"font-weight":"bold","font-size":"16px"}},et={className:"border dark:border-gray-800 text-center px-1 py-2 "},tt={className:"border dark:border-gray-800 text-center px-1 py-2 "},st={className:"border dark:border-gray-800 text-center px-1 py-2 "},ot={className:"border dark:border-gray-800 text-center px-1 py-2 "},at={className:"border dark:border-gray-800 text-center px-1 py-2 "},rt={className:"border dark:border-gray-800 text-center px-1 py-2 "},lt={className:"border dark:border-gray-800 text-center px-1 py-2 "},dt={className:"border dark:border-gray-800 text-center px-1 py-2 "},nt={className:"border dark:border-gray-800 text-center px-1 py-2 "},it={className:"border dark:border-gray-800 text-center px-1 py-2 "},ct={className:"border dark:border-gray-800 text-center px-1 py-2 "},pt={className:"border dark:border-gray-800 text-center px-1 py-2 "},ut={className:"border dark:border-gray-800 text-center px-1 py-2 "},_t={className:"border dark:border-gray-800 text-center px-1 py-2 "},ht={className:"border dark:border-gray-800 text-center px-1 py-2 "},xt={className:"border dark:border-gray-800 text-center px-1 py-2 "},gt={className:"border dark:border-gray-800 text-center px-1 py-2 "},mt={className:"border dark:border-gray-800 text-center px-1 py-2 "},bt={className:"border dark:border-gray-800 text-center px-1 py-2 "},yt={className:"border dark:border-gray-800 text-start px-1 py-2"},ft=["onClick"],vt=["onClick"],kt=["onClick"],wt={className:"border dark:border-gray-800 text-center px-1 py-2 "},Ct=["href"],$t=["src"],Nt={class:"spaner"},Dt={class:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7"},Mt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},At=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-orange-100 bg-orange-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1),It={class:"mr-4"},Pt={class:"font-semibold"},zt={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},jt={class:"flex items-start rounded-xl dark:bg-gray-600 dark:text-gray-300 bg-white p-4 shadow-lg"},Bt=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-full border border-red-100 bg-red-50"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})])],-1),St={class:"mr-4"},Ut={class:"font-semibold"},Ft={class:"mt-2 text-sm text-gray-500 dark:text-gray-200"},Rt=e("div",null,null,-1),ts={__name:"Sales",props:{client:Array},setup(P){K();const x=Q();let D=d(!1);d(!1),d(!1);let p=d(!1),u=d(!1),_=d(!1),z=d(0),j=d(0);function R(s={}){a.value=s,a.value.shipping_dolar_s==0&&(a.value.shipping_dolar_s=a.value.shipping_dolar),a.value.coc_dolar_s==0&&(a.value.coc_dolar_s=a.value.coc_dolar),a.value.checkout_s==0&&(a.value.checkout_s=a.value.checkout),a.value.expenses_s==0&&(a.value.expenses_s=a.value.expenses),a.value.expenses_dinar_s==0&&(a.value.expenses_dinar_s=a.value.expenses_dinar),a.value.tax_s==0&&(a.value.tax_s=a.value.tax),a.value.commission_s==0&&(a.value.commission_s=a.value.commission),a.value.dinar_s==0&&(a.value.dinar_s=a.value.dinar),u.value=!0}function q(s={}){a.value=s,_.value=!0}function E(s={}){a.value=s,a.value.notePayment=" \u0628\u064A\u062F ",p.value=!0}const a=d({}),g=d([]);let M=d(!1),m=0,A=1,b="";const y=()=>{A=0,g.value.length=0,M.value=!M.value},L=async s=>{console.log(s);try{const t=(await C.get("/getIndexCar",{params:{limit:100,page:A,q:b,user_id:m}})).data;t.data.length<100?(g.value.push(...t.data),s.complete()):(g.value.push(...t.data),s.loaded()),A++}catch(r){console.log(r)}},B=async()=>{C.get("/api/totalInfo").then(s=>{z.value=s.data.data.mainAccount,j.value=s.data.data.allCars}).catch(s=>{console.error(s)})};B();function T(s){u.value=!1,C.post("/api/updateCarsS",s).then(r=>{D.value=!1,x.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0}),B(),y()}).catch(r=>{D.value=!1,x.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}function H(s){C.post("/api/DelCar",s).then(r=>{_.value=!1,x.success("\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D \u0648\u062E\u0635\u0645 \u0627\u0644\u0645\u0628\u0644\u063A \u0645\u0646 \u062F\u064A\u0646 \u0627\u0644\u0632\u0628\u0648\u0646",{timeout:3e3,position:"bottom-right",rtl:!0}),y()}).catch(r=>{console.error(r)})}function G(s){var r,t,h;C.get(`/api/addPaymentCar?car_id=${s.id}&discount=${(r=s.discountPayment)!=null?r:0}&amount=${(t=s.amountPayment)!=null?t:0}&note=${(h=s.notePayment)!=null?h:""}`).then(f=>{y(),p.value=!1,x.success(" \u062A\u0645 \u062F\u0641\u0639 \u0645\u0628\u0644\u063A \u062F\u0648\u0644\u0627\u0631 "+s.amountPayment+" \u0628\u0646\u062C\u0627\u062D ",{timeout:3e3,position:"bottom-right",rtl:!0});let $=f.data;window.open(`/api/getIndexAccountsSelas?user_id=${s.client.id}&print=2&transactions_id=${$.id}`,"_blank")}).catch(f=>{D.value=!1,x.error("\u0644\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",{timeout:2e3,position:"bottom-right",rtl:!0})})}const S=ce(y,500);function O(s){return`/public/uploadsResized/${s}`}function W(s){return`/public/uploads/${s}`}return(s,r)=>(c(),i(N,null,[n(l(V),{title:"Dashboard"}),n(ne,{formData:a.value,show:!!l(u),client:P.client,onA:r[0]||(r[0]=t=>T(t)),onClose:r[1]||(r[1]=t=>w(u)?u.value=!1:u=!1)},{header:k(()=>[]),_:1},8,["formData","show","client"]),n(le,{formData:a.value,show:!!l(p),onA:r[2]||(r[2]=t=>G(t)),onClose:r[3]||(r[3]=t=>w(p)?p.value=!1:p=!1)},{header:k(()=>[]),_:1},8,["formData","show"]),n(de,{show:!!l(_),formData:a.value,onA:r[4]||(r[4]=t=>H(t)),onClose:r[5]||(r[5]=t=>w(_)?_.value=!1:_=!1)},{header:k(()=>[pe]),_:1},8,["show","formData"]),n(te,null,{default:k(()=>[s.$page.props.auth.user.type_id==1||s.$page.props.auth.user.type_id==6?(c(),i("div",ue,[e("div",_e,[e("div",he,[e("div",xe,[e("div",ge,[e("div",me,[e("div",null,[e("form",be,[ye,e("div",fe,[ve,U(e("input",{"onUpdate:modelValue":r[6]||(r[6]=t=>w(b)?b.value=t:b=t),onInput:r[7]||(r[7]=(...t)=>l(S)&&l(S)(...t)),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"\u0628\u062D\u062B",required:""},null,544),[[X,l(b)]])])])]),e("div",null,[U(e("select",{onChange:r[8]||(r[8]=t=>y()),"onUpdate:modelValue":r[9]||(r[9]=t=>w(m)?m.value=t:m=t),id:"default",class:"pr-8 bg-gray-50 border border-gray-300 text-gray-900 mb-6 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"},[e("option",ke,o(s.$t("selectCustomer")),1),e("option",we,o(s.$t("allOwners")),1),(c(!0),i(N,null,I(P.client,(t,h)=>(c(),i("option",{key:h,value:t.id},o(t.name),9,Ce))),128))],544),[[Y,l(m)]])])]),e("div",null,[$e,e("div",Ne,[e("table",De,[e("thead",Me,[e("tr",null,[Ae,e("th",Ie,o(s.$t("car_owner")),1),e("th",Pe,o(s.$t("car_type")),1),e("th",ze,o(s.$t("year")),1),e("th",je,o(s.$t("color")),1),e("th",Be,o(s.$t("vin")),1),e("th",Se,o(s.$t("car_number")),1),Ue,Fe,Re,qe,Ee,Le,Te,He,Ge,e("th",Oe,o(s.$t("total")),1),e("th",We,o(s.$t("paid")),1),Je,e("th",Ke,o(s.$t("date")),1),e("th",Qe,o(s.$t("note")),1),e("th",Ve,o(s.$t("execute")),1),Xe])]),e("tbody",null,[(c(!0),i(N,null,I(g.value,(t,h)=>{var f,$;return c(),i("tr",{key:t.id,class:Z([t.results==0?"":t.results==1?"bg-red-100 dark:bg-red-900":"bg-green-100 dark:bg-green-900","bg-white border-b dark:bg-gray-900 dark:border-gray-900 hover:bg-gray-50 dark:hover:bg-gray-600"])},[e("td",Ye,o(h+1),1),e("td",Ze,o((f=t.client)==null?void 0:f.name),1),e("td",et,o(t.car_type),1),e("td",tt,o(t.year),1),e("td",st,o(t.car_color),1),e("td",ot,o(t.vin),1),e("td",at,o(t.car_number),1),e("td",rt,o(t.shipping_dolar_s),1),e("td",lt,o(t.coc_dolar_s),1),e("td",dt,o(t.dolar_price_s),1),e("td",nt,o(t.checkout_s),1),e("td",it,o(t.dinar_s),1),e("td",ct,o(t.commission_s),1),e("td",pt,o(t.tax_s),1),e("td",ut,o(t.expenses_s),1),e("td",_t,o(t.expenses_dinar_s),1),e("td",ht,o(t.total_s.toFixed(0)),1),e("td",xt,o(t.paid),1),e("td",gt,o((t.total_s-t.total).toFixed(0)),1),e("td",mt,o(t.date),1),e("td",bt,o(t.note),1),e("td",yt,[e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-slate-500 rounded",onClick:v=>R(t)},[n(re)],8,ft),e("button",{tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-orange-500 rounded",onClick:v=>q(t)},[n(ae)],8,vt),t.total_s!=t.paid+t.discount?(c(),i("button",{key:0,tabIndex:"1",class:"px-1 py-1 text-white mx-1 bg-green-500 rounded",onClick:v=>E(t)},[n(oe)],8,kt)):F("",!0),n(l(ee),{style:{display:"inline-flex"},className:"px-1 py-1  text-white mx-1 bg-blue-500 rounded d-inline-block",href:s.route("showClients",($=t.client)==null?void 0:$.id)},{default:k(()=>[n(se)]),_:2},1032,["href"])]),e("td",wt,[(c(!0),i(N,null,I(t.car_images,(v,J)=>(c(),i("a",{key:J,href:W(v.name),style:{cursor:"pointer"},target:"_blank"},[e("img",{src:O(v.name),alt:"",class:"px-1",style:{"max-width":"100px","max-height":"50px",display:"inline"}},null,8,$t)],8,Ct))),128))])],2)}),128))])])])]),e("div",Nt,[n(l(ie),{car:g.value,onInfinite:L,identifier:l(M)},null,8,["car","identifier"])]),e("div",null,[e("div",Dt,[e("div",Mt,[At,e("div",It,[e("h2",Pt,o(s.$t("capital")),1),e("p",zt,o(l(z)),1)])]),e("div",jt,[Bt,e("div",St,[e("h2",Ut,o(s.$t("all_cars")),1),e("p",Ft,o(l(j)),1)])])])])])])])])])):F("",!0),Rt]),_:1})],64))}};export{ts as default};
